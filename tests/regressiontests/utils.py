# -*- coding: utf-8 -*-

import os, sys
import unittest
import codecs
import StringIO

CURRENT_DIR = os.path.dirname(__file__)

VERSION_INFO = sys.version_info

class UtilsTestCase(unittest.TestCase):
    def test_rst_table(self):
        from colbert.utils import rst_table
        
        # Simple table.
        result = rst_table([
            [
                ("1-1", 8),
                ("1-2", 6),
                ("1-3", 14),
            ],
            [
                ("2-1", 8),
                ("2-2", 6),
                ("2-3", 14),
            ],
            [
                ("3-1", 8),
                ("3-2", 6),
                ("3-3", 14),
            ],
        ])
        self.assertEqual(result,
u"""+--------+------+--------------+
| 1-1    | 1-2  | 1-3          |
+========+======+==============+
| 2-1    | 2-2  | 2-3          |
+--------+------+--------------+
| 3-1    | 3-2  | 3-3          |
+--------+------+--------------+""")

        # Multilines table.
        result = rst_table([
            [
                [("1-1-1", 8), ("1-2-1", 9), ("1-3-1", 14)],
                [("1-1-2", 8), ("1-2-2", 9), ("1-3-2", 14)],
                [("1-1-3", 8), ("1-2-3", 9), ("1-3-3", 14)],
            ],
            [
                [("2-1-1", 8), ("2-2-1", 9), ("2-3-1", 14)],
                [("2-1-2", 8), ("2-2-2", 9), ("2-3-2", 14)],
                [("2-1-3", 8), ("2-2-3", 9), ("2-3-3", 14)],
            ],
            [
                [("3-1-1", 8), ("3-2-1", 9), ("3-3-1", 14)],
                [("3-1-2", 8), ("3-2-2", 9), ("3-3-2", 14)],
                [("3-1-3", 8), ("3-2-3", 9), ("3-3-3", 14)],
            ],
        ])
        self.maxDiff = None
        self.assertEqual(result,
u"""+--------+---------+--------------+
|| 1-1-1 || 1-2-1  || 1-3-1       |
|| 1-1-2 || 1-2-2  || 1-3-2       |
|| 1-1-3 || 1-2-3  || 1-3-3       |
+========+=========+==============+
|| 2-1-1 || 2-2-1  || 2-3-1       |
|| 2-1-2 || 2-2-2  || 2-3-2       |
|| 2-1-3 || 2-2-3  || 2-3-3       |
+--------+---------+--------------+
|| 3-1-1 || 3-2-1  || 3-3-1       |
|| 3-1-2 || 3-2-2  || 3-3-2       |
|| 3-1-3 || 3-2-3  || 3-3-3       |
+--------+---------+--------------+""")

def suite():
    suite = unittest.TestLoader().loadTestsFromTestCase(UtilsTestCase)
    return suite
